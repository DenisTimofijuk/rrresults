import{g as p,d as f,h as C}from"./errorHandler-D8qLAtV7.js";function g(t){const a=document.createElement("table");a.classList.add("table"),a.classList.add("table-hover"),a.classList.add("table-bordered"),a.classList.add("table-sm");const s=document.createElement("thead");s.classList.add("table-light");const o=document.createElement("tr");o.setAttribute("id","header-row"),["Komanda","Total"].forEach(n=>{const d=document.createElement("th");d.textContent=n,o.appendChild(d)}),s.appendChild(o),a.appendChild(s);const l=document.createElement("tbody");return t.sort((n,d)=>n.teamName.localeCompare(d.teamName)).forEach(n=>{const d=document.createElement("tr");d.dataset.team=n.teamName,[n.teamName,0].forEach(i=>{const u=document.createElement("th");u.textContent=(i==null?void 0:i.toString())||"",d.appendChild(u)}),l.appendChild(d)}),a.appendChild(l),a}let r=0,h=!1;const y=document.getElementById("visible-column-progress");function E(t,a){if(r>=Object.entries(t[0].data).length||h)return;y.textContent=`${r+1} / ${Object.entries(t[0].data).length}`,h=!0;const s=document.createElement("th");s.textContent=t[0].data[r].title,a.tHead.rows.item(0).appendChild(s);const o=a.tBodies[0];let c=0;t.forEach(l=>{const e=[...o.children].find(d=>d.dataset.team===l.teamName),n=document.createElement("td");e.appendChild(n),l.total||(l.total=0),v(n,l.data[r].value,()=>{l.total+=l.data[r].value,c++,e.cells[1].textContent=l.total.toString(),c===t.length&&(b(t,a),r++,h=!1)})})}function v(t,a,s){let o=0;const c=setInterval(()=>{o+=Math.ceil(a/20),o>=a&&(o=a,clearInterval(c),s&&s()),t.textContent=o.toString()},50)}function b(t,a){const s=[...t].sort((e,n)=>n.total-e.total),o=a.tBodies[0],c=[...o.children],l=c.map(e=>e.getBoundingClientRect().top);s.forEach(e=>{o.appendChild(c.find(n=>n.dataset.team===e.teamName))}),c.forEach((e,n)=>{const d=e.getBoundingClientRect().top,m=l[n]-d;e.style.transition="none",e.style.transform=`translateY(${m}px)`,requestAnimationFrame(()=>{e.style.transition="transform 0.5s ease-in-out",e.style.transform="translateY(0)"})})}function B(){r=0,h=!1,y.textContent=""}(async()=>{const t=document.getElementById("loader-wrapper"),a=document.getElementById("get-data-by-year"),s=document.getElementById("year-selected"),o=document.getElementById("reveal-next"),c=document.getElementById("results"),l=document.getElementById("year-place-holder");try{t==null||t.classList.remove("hide"),(await p("./mock/years.json")).forEach(m=>{const i=document.createElement("option");i.value=m.toString(),i.textContent=m.toString(),s.appendChild(i)}),t==null||t.classList.add("hide")}catch{f()}let e=null,n=null;o.addEventListener("click",()=>{n&&e&&E(n,e)}),a.addEventListener("click",async()=>{if(s.value){C(),l.textContent=s.value,e&&(c.removeChild(e),B());try{t==null||t.classList.remove("hide"),o.classList.add("hide"),n=await p("./mock/results.json?y=2025"),e=g(n),c.appendChild(e),t==null||t.classList.add("hide"),o.classList.remove("hide")}catch{f()}}})})();
