import{a as p,d as f,h as C}from"./errorHandler-CrSArjwa.js";function y(t){const a=document.createElement("table");a.classList.add("table"),a.classList.add("table-hover"),a.classList.add("table-bordered"),a.classList.add("table-sm");const d=document.createElement("thead");d.classList.add("table-light");const o=document.createElement("tr");o.setAttribute("id","header-row"),["Komanda","Total"].forEach(n=>{const s=document.createElement("th");s.textContent=n,o.appendChild(s)}),d.appendChild(o),a.appendChild(d);const l=document.createElement("tbody");return t.sort((n,s)=>n.teamName.localeCompare(s.teamName)).forEach(n=>{const s=document.createElement("tr");s.dataset.team=n.teamName,[n.teamName,0].forEach(i=>{const u=document.createElement("th");u.textContent=(i==null?void 0:i.toString())||"",s.appendChild(u)}),l.appendChild(s)}),a.appendChild(l),a}let r=0,h=!1;const g=document.getElementById("visible-column-progress");function E(t,a){if(r>=Object.entries(t[0].data).length||h)return;g.textContent=`${r+1} / ${Object.entries(t[0].data).length}`,h=!0;const d=document.createElement("th");d.textContent=t[0].data[r].title,a.tHead.rows.item(0).appendChild(d);const o=a.tBodies[0];let c=0;t.forEach(l=>{const e=[...o.children].find(s=>s.dataset.team===l.teamName),n=document.createElement("td");e.appendChild(n),l.total||(l.total=0),v(n,l.data[r].value,()=>{l.total+=l.data[r].value,c++,e.cells[1].textContent=l.total.toString(),c===t.length&&(b(t,a),r++,h=!1)})})}function v(t,a,d){let o=0;const c=setInterval(()=>{o+=Math.ceil(a/20),o>=a&&(o=a,clearInterval(c),d&&d()),t.textContent=o.toString()},50)}function b(t,a){const d=[...t].sort((e,n)=>n.total-e.total),o=a.tBodies[0],c=[...o.children],l=c.map(e=>e.getBoundingClientRect().top);d.forEach(e=>{o.appendChild(c.find(n=>n.dataset.team===e.teamName))}),c.forEach((e,n)=>{const s=e.getBoundingClientRect().top,m=l[n]-s;e.style.transition="none",e.style.transform=`translateY(${m}px)`,requestAnimationFrame(()=>{e.style.transition="transform 0.5s ease-in-out",e.style.transform="translateY(0)"})})}function B(){r=0,h=!1,g.textContent=""}(async()=>{const t=document.getElementById("loader-wrapper"),a=document.getElementById("get-data-by-year"),d=document.getElementById("year-selected"),o=document.getElementById("reveal-next"),c=document.getElementById("results"),l=document.getElementById("year-place-holder");try{t==null||t.classList.remove("hide"),(await p.getAvailableYears()).forEach(m=>{const i=document.createElement("option");i.value=m.toString(),i.textContent=m.toString(),d.appendChild(i)}),t==null||t.classList.add("hide")}catch{f()}let e=null,n=null;o.addEventListener("click",()=>{n&&e&&E(n,e)}),a.addEventListener("click",async()=>{const s=d.value;if(s){C(),l.textContent=d.value,e&&(c.removeChild(e),B());try{t==null||t.classList.remove("hide"),o.classList.add("hide"),n=await p.getResultsByYear(s),e=y(n),c.appendChild(e),t==null||t.classList.add("hide"),o.classList.remove("hide")}catch{f()}}})})();
